From 4994b917cfb63adc4a24659f4f9c81df58ad5923 Mon Sep 17 00:00:00 2001
From: LynnL4 <lht856@foxmail.com>
Date: Tue, 22 Oct 2024 06:42:49 +0000
Subject: [PATCH] feat: custom

---
 .../@node-red/registry/lib/installer.js       |  9 ++-----
 packages/node_modules/node-red/custom.css     | 24 +++++++++++++++++++
 packages/node_modules/node-red/settings.js    |  9 +++++++
 3 files changed, 35 insertions(+), 7 deletions(-)
 create mode 100644 packages/node_modules/node-red/custom.css

diff --git a/packages/node_modules/@node-red/registry/lib/installer.js b/packages/node_modules/@node-red/registry/lib/installer.js
index 495a956af..c583cc0a4 100644
--- a/packages/node_modules/@node-red/registry/lib/installer.js
+++ b/packages/node_modules/@node-red/registry/lib/installer.js
@@ -595,17 +595,12 @@ async function checkPrereq() {
         installerEnabled = false;
     } else {
         return new Promise(resolve => {
-            child_process.execFile(npmCommand,['-v'],{ shell: true },function(err,stdout) {
+            child_process.execFile(which,['npm'],{ shell: true },function(err,stdout) {
                 if (err) {
                     log.info(log._("server.palette-editor.npm-not-found"));
                     installerEnabled = false;
                 } else {
-                    if (parseInt(stdout.split(".")[0]) < 3) {
-                        log.info(log._("server.palette-editor.npm-too-old"));
-                        installerEnabled = false;
-                    } else {
-                        installerEnabled = true;
-                    }
+                    installerEnabled = true;
                 }
                 resolve();
             });
diff --git a/packages/node_modules/node-red/custom.css b/packages/node_modules/node-red/custom.css
new file mode 100644
index 000000000..348ac322e
--- /dev/null
+++ b/packages/node_modules/node-red/custom.css
@@ -0,0 +1,24 @@
+#red-ui-header {
+    background-color: white;
+}
+
+#red-ui-header .red-ui-deploy-button {
+    background: #8CC020;
+}
+
+#red-ui-header .red-ui-deploy-button:hover {
+    background: #8CC020;
+}
+
+#red-ui-header #red-ui-header-button-deploy.disabled {
+    background: var(--red-ui-tab-background-inactive);
+}
+
+#red-ui-header #red-ui-header-button-deploy.disabled+#red-ui-header-button-deploy-options {
+    background: var(--red-ui-tab-background-inactive);
+}
+
+#red-ui-header .button {
+    border-left: none;
+    border-right: none;
+}
\ No newline at end of file
diff --git a/packages/node_modules/node-red/settings.js b/packages/node_modules/node-red/settings.js
index e8bb01228..6dc8e1016 100644
--- a/packages/node_modules/node-red/settings.js
+++ b/packages/node_modules/node-red/settings.js
@@ -409,6 +409,15 @@ module.exports = {
          */
         //tours: false,
 
+        page: {
+            title: "reCamera",
+            css: "/usr/lib/node_modules/node-red/custom.css"
+        },
+        header: {
+            title: ' ',
+            image: null,
+        },
+
         palette: {
             /** The following property can be used to order the categories in the editor
              * palette. If a node's category is not in the list, the category will get
-- 
2.43.0

